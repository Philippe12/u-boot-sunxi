/*
 * (C) Copyright 2000-2009
 * Philippe FOUQUET Environnement-sa.
 *
 * SPDX-License-Identifier:	GPL-2.0+
 */

#include <common.h>
#include <bootm.h>
#include <command.h>
#include <environment.h>
#include <errno.h>
#include <image.h>
#include <lmb.h>
#include <malloc.h>
#include <mapmem.h>
#include <nand.h>
#include <asm/byteorder.h>
#include <linux/compiler.h>
#include <linux/ctype.h>
#include <linux/err.h>
#include <u-boot/zlib.h>
#include <dm.h>
#include <fdtdec.h>
#include <malloc.h>
#include <asm/arch/gpio.h>
#include <asm/io.h>
#include <asm/gpio.h>
#include <dm/device-internal.h>
#include <stdlib.h>


#define HIGH    1
#define LOW     0

#define INPUT   0
#define OUTPUT  1
#define PER     2

// ECRAN LCD

#define LCD_IO_D0 SUNXI_GPD(0)
#define LCD_IO_D1 SUNXI_GPD(1)
#define LCD_IO_D2 SUNXI_GPD(2)
#define LCD_IO_D3 SUNXI_GPD(3)
#define LCD_IO_D4 SUNXI_GPD(4)
#define LCD_IO_D5 SUNXI_GPD(5)
#define LCD_IO_D6 SUNXI_GPD(6)
#define LCD_IO_D7 SUNXI_GPD(7)

#define SWIO_1 SUNXI_GPD(14)
#define SWIO_2 SUNXI_GPD(15)
#define SWIO_3 SUNXI_GPD(16)
#define SWIO_4 SUNXI_GPD(17)
#define SWIO_5 SUNXI_GPD(18)
#define SWIO_6 SUNXI_GPD(19)
#define SWIO_7 SUNXI_GPD(20)

#define LCD_IO_DATA_DIR SUNXI_GPD(8)
#define LCD_IO_DATA_OE  SUNXI_GPD(9)

#define IO_LCD SUNXI_GPE(2)
//#define IO_BIP SUNXI_GPE(0)
#define IO_BIP_NEW SUNXI_GPB(2)
#define IO_LED SUNXI_GPE(3)

#define LCD_IO_CE     SUNXI_GPI(0)
#define LCD_IO_RESET  SUNXI_GPI(2)


#define LCD_IO_CD  SUNXI_GPE(8)
#define LCD_IO_RD  SUNXI_GPE(9)

#define LCD_IO_WR  SUNXI_GPE(11)

#define LCD_MAX_LIGNES   16
#define LCD_MAX_COLONNES 40

#define BLACK  0
#define WHITE  1

static int i_PosCur_X;                                    // Position X du curseur.
static int i_PosCur_Y;                                    // Position Y du curseur.
char l2_c_detect_lcd = 0;

char l1_c_set_scr;                         // sav cfg ecran en cours
char l1_c_set_atr;                         // sav attribut courant
char l1_c_color= WHITE;                           // sav couleur courante

char IO_c_CmdFrc = 0;

static inline void vP_nanosleep ( unsigned int uiUs)
{
    volatile unsigned int uiBusyWait=0;
    do
    {
        uiBusyWait++;
        asm volatile ("nop"); 
    }while (uiBusyWait<uiUs*2);
}

typedef enum { PORT_DATA = 0, PORT_CTRL } ePORT; 


static void vP_CfgIo( void )
{
    static int actif = 0;

    if( actif == 1 ) return;

    actif = 1;

    //printf("%s\n",__func__);

    gpio_direction_output( LCD_IO_DATA_OE,1);

    gpio_direction_output( LCD_IO_CD , 1);
    gpio_direction_output( LCD_IO_RD , 1);
    gpio_direction_output( LCD_IO_WR , 1);
    gpio_direction_output( LCD_IO_CE , 1);
    gpio_direction_output( LCD_IO_RESET , 1);
    gpio_direction_output( LCD_IO_RESET , 0);
    vP_nanosleep( 10000 );
    gpio_direction_output( LCD_IO_RESET , 1);
    vP_nanosleep( 100 );
}

static void outportb( ePORT port , unsigned char data)
{
    vP_CfgIo();
    
    gpio_direction_output( LCD_IO_D0, data & 0x01);
    gpio_direction_output( LCD_IO_D1, data & 0x02);
    gpio_direction_output( LCD_IO_D2, data & 0x04);
    gpio_direction_output( LCD_IO_D3, data & 0x08);
    gpio_direction_output( LCD_IO_D4, data & 0x10);
    gpio_direction_output( LCD_IO_D5, data & 0x20);
    gpio_direction_output( LCD_IO_D6, data & 0x40);
    gpio_direction_output( LCD_IO_D7, data & 0x80);


    gpio_direction_output( LCD_IO_DATA_DIR,LOW); // direction boitier sortie

    gpio_direction_output( LCD_IO_DATA_OE,LOW); //active boitier
    

    // CONFIGURATION DU CHIP
    if( PORT_DATA == port )
    {   // Data Write
        // CD=0 , RD=1 , WR=0 , CE=0  
        gpio_direction_output( LCD_IO_RD , HIGH);   
        gpio_direction_output( LCD_IO_WR , LOW);
        gpio_direction_output( LCD_IO_CD , LOW);  
        gpio_direction_output( LCD_IO_CE , LOW);
    }
    else        
    {   // Command Write
        // CD=1 , RD=1 , WR=0 , CE=0  
        gpio_direction_output( LCD_IO_RD , HIGH);   
        gpio_direction_output( LCD_IO_WR , LOW); 
        gpio_direction_output( LCD_IO_CD , HIGH); 
        gpio_direction_output( LCD_IO_CE , LOW);
    }    

    // les données du bus sont déja positionnées

    // RELACHE LE CHIP
    // CE=1 , WD=1 , RD=1 , CD=1
    /*for( j = 0 ; j <  10 ; j++ )*/ gpio_direction_output( LCD_IO_CE , HIGH); 
    gpio_direction_output( LCD_IO_WR , HIGH); 
    gpio_direction_output( LCD_IO_RD , HIGH); 
    gpio_direction_output( LCD_IO_CD , HIGH);
}

// configuration d'un port en entrée
static unsigned char inportb ( ePORT port )
{
    unsigned char uc = 0;
 
    vP_CfgIo();

	gpio_direction_input( LCD_IO_D0);
	gpio_direction_input( LCD_IO_D1);
	gpio_direction_input( LCD_IO_D2);
	gpio_direction_input( LCD_IO_D3);
	gpio_direction_input( LCD_IO_D4);
	gpio_direction_input( LCD_IO_D5);
	gpio_direction_input( LCD_IO_D6);
	gpio_direction_input( LCD_IO_D7);

    gpio_direction_output( LCD_IO_DATA_DIR,HIGH); // direction boitier
    gpio_direction_output( LCD_IO_DATA_OE,LOW); // active boitier


    // CONFIGURATION DU CHIP
    if( PORT_DATA == port )
    {   // Data Read
        // CD=0 , RD=0 , WR=1 , CE=0
        gpio_direction_output( LCD_IO_RD , LOW);    
        gpio_direction_output( LCD_IO_WR , HIGH);  
        gpio_direction_output( LCD_IO_CD , LOW);    
        gpio_direction_output( LCD_IO_CE , LOW);
    }
    else
    {   // Status Read
        // CD=1 , RD=0 , WR=1 , CE=0 
        gpio_direction_output( LCD_IO_RD , LOW);    
        gpio_direction_output( LCD_IO_WR , HIGH); 
        gpio_direction_output( LCD_IO_CD , HIGH);   
        gpio_direction_output( LCD_IO_CE , LOW);
    }

    // attente de la stabilisation du signal

    // lecture
    if( gpio_get_value( LCD_IO_D0) == 1 ) uc |= 0x01;
    if( gpio_get_value( LCD_IO_D1) == 1 ) uc |= 0x02;
    if( gpio_get_value( LCD_IO_D2) == 1 ) uc |= 0x04;
    if( gpio_get_value( LCD_IO_D3) == 1 ) uc |= 0x08;
    if( gpio_get_value( LCD_IO_D4) == 1 ) uc |= 0x10;
    if( gpio_get_value( LCD_IO_D5) == 1 ) uc |= 0x20;
    if( gpio_get_value( LCD_IO_D6) == 1 ) uc |= 0x40;
    if( gpio_get_value( LCD_IO_D7) == 1 ) uc |= 0x80;


    
    // RELACHE LE CHIP
    // CE=1 , WD=1 , RD=1 , CD=1
    gpio_direction_output( LCD_IO_RD , HIGH);   
    gpio_direction_output( LCD_IO_WR , HIGH);
    /*for( j = 0 ; j <  10 ; j++ )*/ gpio_direction_output( LCD_IO_CE , HIGH);
    gpio_direction_output( LCD_IO_CD , HIGH); 

    return uc;
}

static int get_SW(int pos)
{
	int sw;
	switch(pos)
	{
		case 1: sw=SWIO_1;break;
		case 2: sw=SWIO_2;break;
		case 3: sw=SWIO_3;break;
		case 4: sw=SWIO_4;break;
		case 5: sw=SWIO_5;break;
		case 6: sw=SWIO_6;break;
		case 7: sw=SWIO_7;break;
		default :return -1;
	}
	gpio_direction_input( sw );
	return gpio_get_value(sw);
}
 
static void  TstByte( unsigned char value )
{
    while((inportb(PORT_CTRL)&value)!=value);
}


static void  TstRdy( void )
{
    TstByte( 0x03 );
}

static void vP_TstRdy ( void )
{
    int i = 1000;
	unsigned char uc = 0;

    while ( -- i )
    {
    	uc = inportb(PORT_CTRL);

        if ( ( uc & 0x03 ) == 0x03 ) { break; }
    }
}

void IO_vP_Ini_IO ( void )
{
    static int init = 0;

    if( init == 0 )
    {
        IO_c_CmdFrc = 0;
		gpio_request( LCD_IO_D0,"LCD_D0");
		gpio_request( LCD_IO_D1,"LCD_D1");
		gpio_request( LCD_IO_D2,"LCD_D2");
		gpio_request( LCD_IO_D3,"LCD_D3");
		gpio_request( LCD_IO_D4,"LCD_D4");
		gpio_request( LCD_IO_D5,"LCD_D5");
		gpio_request( LCD_IO_D6,"LCD_D6");
		gpio_request( LCD_IO_D7,"LCD_D7");
	
		gpio_request( LCD_IO_DATA_DIR,	"LCD_DIR");
		gpio_request( LCD_IO_DATA_OE,	"LCD_OE");

	    gpio_request( LCD_IO_CE   ,"LCD_CE");
	    gpio_request( LCD_IO_RESET,"LCD_RESET");
	    gpio_request( LCD_IO_CD   ,"LCD_CD");
	    gpio_request( LCD_IO_RD   ,"LCD_RD");
	    gpio_request( LCD_IO_WR   ,"LCD_WR");
	
	    gpio_request( SWIO_1,"SW_1");
	    gpio_request( SWIO_2,"SW_2");
	    gpio_request( SWIO_3,"SW_3");
	    gpio_request( SWIO_4,"SW_4");
	    gpio_request( SWIO_5,"SW_5");
	    gpio_request( SWIO_6,"SW_6");
	    gpio_request( SWIO_7,"SW_7");

	    gpio_request( IO_LED ,"LED");

	    gpio_request( IO_LCD ,"LCD");

	    gpio_request( IO_BIP_NEW ,"BIP");

        init = 1;
    }
}

void IO_vP_RetLCD ( char c_Eta )
{    
    IO_vP_Ini_IO();
    
    if ( ! IO_c_CmdFrc ) 
    {    
        if ( c_Eta ) { gpio_direction_output( IO_LCD , 1); } 
        else         { gpio_direction_output( IO_LCD , 0); }
     
    }
}

void IO_vP_Bip ( void )
{        
    gpio_direction_output( IO_BIP_NEW , 1);        
    gpio_direction_output( IO_BIP_NEW , 0);
}

/*=====================================================================================================================
Matrice de caractres:                                                                                               */

/*---------------------------------------------------------------------------------------------------------------------
Double hauteur:                                                                                                      */

static const char TAB_CAR_DH [ ] =
{
    '0', 142, 143,
    '1', 160, 161,

    '2', 162, 163,
    '3', 162, 164,
    '4', 165, 166,
    '5', 201, 164,
    '6', 167, 168,
    '7', 199, 193,
    '8', 169, 168,
    '9', 169, 164,
    'A', 169, 172,
    'B', 173, 174,
    'C', 175, 202,
    'D', 177, 178,
    'E', 201, 163,
    'F', 201, 179,
    'G', 175, 171,
    'H', 165, 172,
    'I', 180, 161,
    'J', 181, 182,
    'K', 183, 184,
    'L', 185, 176,
    'M', 186, 187,
    'N', 188, 189,
    'O', 170, 171,
    'P', 173, 179,
    'Q', 170, 190,
    'R', 173, 191,
    'S', 167, 164,
    'T', 192, 193,
    'U', 194, 171,
    'V', 194, 195,
    'W', 194, 196,
    'X', 197, 198,
    'Y', 197, 193,
    'Z', 199, 200,
    'ø', 0x98, 0,
    ' ', 0, 0,
    '+', 0, '+' - ' ',
    '-', 0, 230,
    '.', 0, 203,
    ':', 203, 203,
    '=', 0, '=' - ' ',
    '/', 0, '/' - ' ',
    '%', '%' - ' ', 0
};
#define MAX_CAR_DH  sizeof ( TAB_CAR_DH )

/*---------------------------------------------------------------------------------------------------------------------
Triple hauteur:                                                                                                      */

static const char TAB_CAR_TH [ ] =
{
    ' ',   0,   0,   0,   0,   0,   0,
    '-',   0,   0, 208, 221,   0,   0,
    '.',   0,   0, 207,   0,   0,   0,
    ':',   0,   0, 207,   0, 207,   0,

    '0', 216, 217, 204, 205, 223, 224,
    '1', 210, 211, 212, 213, 214, 215,
    '2', 216, 217, 218, 219, 220, 221,
    '3', 216, 217,   0, 237, 223, 224,
    '4', 225, 226, 227, 222,   0, 228,
    '5', 229, 230, 227, 231, 223, 224,
    '6', 216, 217, 232, 231, 223, 224,
    '7', 233, 234, 218, 219, 235, 0,
    '8', 216, 217, 209, 237, 223, 224,
    '9', 216, 217, 236, 222, 223, 224,

    'A', 216, 217, 232, 222, 235, 228,
    'B', 229, 217, 232, 237, 220, 224,
    'C', 216, 217, 238,   0, 223, 224,
    'D', 229, 217, 238, 239, 220, 224,
    'E', 229, 230, 232, 206, 220, 221,
    'F', 229, 230, 232, 206, 235,   0,
    'G', 216, 217, 238, 241, 223, 224,
    'H', 225, 226, 232, 222, 235, 228,
    'I', 240, 211, 212, 213, 214, 215,
    'J', 0,   226,   0, 239, 223, 224,
    'K', 225, 226, 232, 237, 235, 228,
    'L', 225,   0, 238,   0, 220, 221,
    'M', 242, 243, 244, 245, 235, 228,
    'N', 242, 226, 244, 246, 235, 247,
    'O', 216, 217, 238, 239, 223, 224,
    'P', 229, 217, 232, 248, 235,   0,
    'Q', 216, 217, 238, 239, 223, 249,
    'R', 229, 217, 232, 237, 235, 228,
    'S', 216, 217, 236, 231, 223, 224,
    'T', 250, 251, 212, 213, 214, 215,
    'U', 225, 226, 238, 239, 223, 224,
    'V', 225, 226, 238, 239, 252, 253,
    'W', 225, 226, 254, 246, 255, 247,
    'X', 225, 226, 209, 237, 235, 228,
    'Y', 225, 226, 236, 222, 208, 224,
    'Z', 233, 234, 218, 219, 220, 221
};
#define MAX_CAR_TH sizeof ( TAB_CAR_TH )

/*=====================================================================================================================
Procdures:                                                                                                          */

static char cP_FilCar ( char c )
{
    if ( ( c >= 'a' ) && ( c <= 'z' ) )
    {
        c -= 32;
    }
    else if ( c == '' ) { c = 'E'; }
    else if ( c == '' ) { c = 'E'; }
    else if ( c == '' ) { c = 'A'; }
    else if ( c == '' ) { c = 'E'; }
    else if ( c == '' ) { c = 'E'; }
    else if ( c == '' ) { c = 'U'; }
    else if ( c == '' ) { c = 'A'; }
    else if ( c == '' ) { c = 'O'; }
    else if ( c == '' ) { c = 'A'; }
    else if ( c == '' ) { c = 'O'; }
    else if ( c == '' ) { c = 'C'; }
    
    return ( c );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_set_data ( char c )
{
    TstRdy ( );
    outportb ( PORT_DATA, c );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_set_ctrl ( char c )
{
    TstRdy ( );
    outportb ( PORT_CTRL, c );
}

//---------------------------------------------------------------------------------------------------------------------

static void putchr_1 ( char c )
{
    l2_vP_set_data( c );
    l2_vP_set_ctrl( 0xC0 );
}

//---------------------------------------------------------------------------------------------------------------------

char l2_vP_read_data ( void )
{
    char c = 0;
    TstRdy ( ); 
    c = inportb ( PORT_DATA ) + 0x20;
    return c;
}
//---------------------------------------------------------------------------------------------------------------------

void l2_vP_locate ( int i_Lig, int i_Col )
{
    int i_Adr;

    if ( i_Lig > LCD_MAX_LIGNES   ) { i_Lig = 0; }
    if ( i_Col > LCD_MAX_COLONNES ) { i_Col = 0; }

    i_Adr = ( i_Lig * 40 ) + ( i_Col + 0x1700 );
    l2_vP_set_data ( ( char ) ( i_Adr & 255 ) );
    l2_vP_set_data ( ( char ) ( i_Adr >>  8 ) );
    l2_vP_set_ctrl ( 0x24 );

    i_PosCur_Y = i_Lig;
    i_PosCur_X = i_Col;
}

/*---------------------------------------------------------------------------------------------------------------------
Double hauteur:                                                                                                      */

static void vP_DH ( char c )
{
    unsigned int i_Dta = 0;

    i_Dta = 0;
    while ( TAB_CAR_DH [ i_Dta ] != c )
    {
        i_Dta += 3;
        if ( i_Dta >= MAX_CAR_DH )
        {
        	return;
        }
    }

    putchr_1 ( ( char ) TAB_CAR_DH [ i_Dta + 1 ] );
    l2_vP_locate ( i_PosCur_Y + 1, i_PosCur_X );
    putchr_1 ( ( char ) TAB_CAR_DH [ i_Dta + 2 ] );

    i_PosCur_Y --;
    i_PosCur_X ++;

    l2_vP_locate ( i_PosCur_Y, i_PosCur_X );
}

/*---------------------------------------------------------------------------------------------------------------------
Triple hauteur:                                                                                                      */

static void vP_TH ( char c )
{
    unsigned int i_Dta = 0;

    while ( TAB_CAR_TH [ i_Dta ] != c )
    {
        i_Dta += 7;
        if ( i_Dta >= MAX_CAR_TH )
        {
        	return;
        }
    }

    if ( c == ' ' || c == '-' || c >= '0' )                // Double largeur.
    {
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 1 ] );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 2 ] );
        l2_vP_locate ( i_PosCur_Y + 1, i_PosCur_X );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 3 ] );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 4 ] );
        l2_vP_locate ( i_PosCur_Y + 1, i_PosCur_X );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 5 ] );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 6 ] );

        i_PosCur_Y -= 2;
        i_PosCur_X += 2;
    }
    else                                                   // Simple largeur.
    {
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 1 ] );
        l2_vP_locate ( i_PosCur_Y + 1, i_PosCur_X );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 2 ] );
        l2_vP_locate ( i_PosCur_Y + 1, i_PosCur_X );
        putchr_1 ( ( char ) TAB_CAR_TH [ i_Dta + 3 ] );

        i_PosCur_Y -= 2;
        i_PosCur_X += 1;
    }

    l2_vP_locate ( i_PosCur_Y, i_PosCur_X );
}

static char cP_test_lcd ( void )
{
    char c, d;

    l2_c_detect_lcd = 1;

    vP_TstRdy ( ); outportb ( PORT_CTRL, 0x80 );
    vP_TstRdy ( ); outportb ( PORT_DATA,    0 );           // RAM graphique en 0000h.
    vP_TstRdy ( ); outportb ( PORT_DATA,    0 );
    vP_TstRdy ( ); outportb ( PORT_CTRL, 0x42 );
    vP_TstRdy ( ); outportb ( PORT_DATA,    0 );           // RAM texte en 1700h.
    vP_TstRdy ( ); outportb ( PORT_DATA, 0x17 );
    vP_TstRdy ( ); outportb ( PORT_CTRL, 0x40 );
    vP_TstRdy ( ); outportb ( PORT_DATA,    0 );           // Curseur texte en 1700h.
    vP_TstRdy ( ); outportb ( PORT_DATA, 0x17 );
    vP_TstRdy ( ); outportb ( PORT_CTRL, 0x24 );

    for ( c = 'Z'; c >= ' '; c -- )
    {
        vP_TstRdy ( ); outportb ( PORT_DATA, 0x00 );       // locate 0, 0.
        vP_TstRdy ( ); outportb ( PORT_DATA, 0x17 );
        vP_TstRdy ( ); outportb ( PORT_CTRL, 0x24 );

        vP_TstRdy ( ); outportb ( PORT_DATA, ( c - 0x20 ) ); // Emission du caractre.
        vP_TstRdy ( ); outportb ( PORT_CTRL, 0xC0 );

        vP_TstRdy ( ); outportb ( PORT_DATA, 0x00 );       // locate 0, 0.
        vP_TstRdy ( ); outportb ( PORT_DATA, 0x17 );
        vP_TstRdy ( ); outportb ( PORT_CTRL, 0x24 );

        vP_TstRdy ( ); outportb ( PORT_CTRL, 0xC1 );       // Lecture du caractre.
        vP_TstRdy ( ); d = inportb ( PORT_DATA ) + 0x20;

        if ( c != d )
        {
            l2_c_detect_lcd = 0;
            break;
        }
    }

    printf( "LCD%d\n" , l2_c_detect_lcd);
    return ( l2_c_detect_lcd );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_send_data ( char c )
{
    l2_vP_set_data ( c );
    l2_vP_set_ctrl ( ( char ) 0xc0 );
}

//---------------------------------------------------------------------------------------------------------------------

static void vP_auto_write ( int i_NmbCar, char c_Dta )
{
    l2_vP_set_ctrl ( 0xb0 );

    TstByte( 0x08);
    
    while ( i_NmbCar -- )
    {
        outportb ( PORT_DATA, c_Dta );
        TstByte( 0x08);
    }
    outportb ( PORT_CTRL, 0xb2 );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_Patr ( int i_Lig, int i_Col, int i_NmbCar, char c_Atr )
{
    unsigned int i_Adr;

/* attribut situe en RAM graphique 1400h */

    l2_vP_set_data ( 0 );
    l2_vP_set_data ( 0x14 );
    l2_vP_set_ctrl ( 0x42 );

    i_Adr = ( i_Lig * 40 ) + i_Col + 0x1400;
    l2_vP_set_data ( ( char ) ( i_Adr & 255 ) );
    l2_vP_set_data ( ( char ) ( i_Adr >>  8 ) );
    l2_vP_set_ctrl ( 0x24 );
    vP_auto_write ( i_NmbCar, c_Atr );
}

/*---------------------------------------------------------------------------------------------------------------------
Code ASCII vu par LCD                           ASCII ANSI
--------------------
                                            ffh -------------
                                               ³           ³
Code Ascii   ffh  -----------------------      ³  etendus  ³
                  ³                     ³       ³           ³
                  ³  128 User RAM car.  ³   80h ³-----------³
                  ³                     ³       ³           ³
Code Ascii   80h  ³---------------------³       ³imprimable ³
                  ³                     ³       ³           ³
                  ³  128 ROM car. T6963 ³   20h -------------
                  ³                     ³       ³ controle  ³
Code ASCII   00h  -----------------------   00h -------------

Pagination de la table de caractre :
-------------------------------------
        00h <= ASCII ANSI <= 20h        ASCI ANSI + 80h ->  LCD
        20h <= ASCII ANSI <= a0h        ASCI ANSI - 20h ->  LCD
        a0h <= ASCII ANSI <= ffh        ASCI ANSI       ->  LCD                                                      */

void l2_vP_putcharc ( char c )
{
    switch ( l1_c_set_atr )
    {
        case 16:                                           // DH.
        {
            c = cP_FilCar ( c );
            vP_DH ( c );
            break;
        }
        case 17:                                           // TH.
        {
            c = cP_FilCar ( c );
            vP_TH ( c );
            break;
        }
        default:                                           // SH.
        {
            switch ( c )
            {
                case 'ø':  { putchr_1 ( ( char ) 0x98 ); break; }
                case '\n': { putchr_1 ( '\r'          ); break; }
                default:
                {
                    if ( c >= 0x20 ) { putchr_1 ( ( char ) ( c - 0x20 ) ); }
                    else             { putchr_1 ( ( char ) ( c + 0x80 ) ); }
                }
            }

            if ( l1_c_set_atr )                            // VNF = 0.
            {
                l2_vP_Patr ( i_PosCur_Y, i_PosCur_X ++, 1, l1_c_set_atr );
                l2_vP_locate ( i_PosCur_Y, i_PosCur_X );
            }
            break;
        }
    }
}

//---------------------------------------------------------------------------------------------------------------------

char l2_cP_read_lcd ( int i_Lig, int i_Col )
{
    char c;

    l2_vP_locate ( i_Lig, i_Col );

    l2_vP_set_ctrl ( 0xc1 );
    c = l2_vP_read_data();

    return ( c );
}


//---------------------------------------------------------------------------------------------------------------------

void l2_vP_clr_st ( void )
{
    l2_vP_locate ( 0, 0 );

    vP_auto_write ( 640, 0 );

    l2_vP_set_data ( 0 );                                  // Positionne attribut courant.
    l2_vP_set_data ( 0x14 );
    l2_vP_set_ctrl ( 0x42 );
    l2_vP_set_data ( 0 );
    l2_vP_set_data ( 0x14 );
    l2_vP_set_ctrl ( 0x24 );

    vP_auto_write ( 640, l1_c_set_atr );

    l2_vP_locate ( 0, 0 );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_clr_sg ( void )
{
    l2_vP_set_data ( 0 );                                  // pointe dbut RAM graphique.
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x42 );
    l2_vP_set_data ( 0 );
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x24 );

    vP_auto_write ( 5120, 0 );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_set_pixel ( int i_Y, int i_X )
{
    char c;
    int i_Adr;

    if ( i_X > 240 ) { i_X = 0; }
    if ( i_Y > 128 ) { i_Y = 0; }

    i_Adr = 5080 - ( i_Y * 40 ) + ( i_X / 6 );

    l2_vP_set_data ( ( char ) ( i_Adr & 255 ) );
    l2_vP_set_data ( ( char ) ( i_Adr >>  8 ) );

    l2_vP_set_ctrl ( 0x24 );
    if ( l1_c_color ) { c = ( char ) 0xfd; }
    else              { c = ( char ) 0xf5; }

    l2_vP_set_ctrl ( ( char ) ( c - ( i_X % 6 ) ) );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_line ( int i_X1, int i_Y1, int i_X2, int i_Y2 )
{
    int i;
    int i_Del;
    int i_X, i_DX, i_Inc_X;
    int i_Y, i_DY, i_Inc_Y;

    if ( i_X1 == i_X2 )                                    // Lignes verticales.
    {
        if ( i_Y2 < i_Y1 )
        {
            i_Y  = i_Y1;
            i_Y1 = i_Y2;
            i_Y2 = i_Y;
        }

        for ( i_Y = i_Y1; i_Y < ( i_Y2 + 1 ); i_Y ++ )
        {
            l2_vP_set_pixel ( i_Y, i_X1 );
        }        
        return;
    }

    if ( i_Y1 == i_Y2 )                                    // Lignes horizontales.
    {
        if ( i_X2 < i_X1 )
        {
            i_X  = i_X1;
            i_X1 = i_X2;
            i_X2 = i_X;
        }

        for ( i_X = i_X1; i_X < ( i_X2 + 1 ); i_X ++ )
        {
            l2_vP_set_pixel ( i_Y1, i_X );
        }        
        return;
    }

    i_X = i_X1;
    i_Y = i_Y1;
    l2_vP_set_pixel ( i_Y, i_X );

    if ( i_X1 > i_X2 ) { i_Inc_X = -1; }
    else               { i_Inc_X =  1; }

    if ( i_Y1 > i_Y2 ) { i_Inc_Y = -1; }
    else               { i_Inc_Y =  1; }

    i_DX = abs ( i_X1 - i_X2 );
    i_DY = abs ( i_Y1 - i_Y2 );
    if ( i_DX > i_DY )
    {
        i_Del = i_DX / 2;
        for ( i = 1; i < i_DX; i ++ )
        {
            i_X = i_X + i_Inc_X;
            i_Del = i_Del + i_DY;
            if ( i_Del >= i_DX )
            {
                i_Del = i_Del - i_DX;
                i_Y = i_Y + i_Inc_Y;
            }
            l2_vP_set_pixel ( i_Y, i_X);
        }
    }
    else
    {
        i_Del = i_DY / 2;
        for ( i = 1; i < i_DY; i ++ )
        {
            i_Y = i_Y + i_Inc_Y;
            i_Del = i_Del + i_DX;
            if ( i_Del >= i_DY )
            {
                i_Del = i_Del - i_DY;
                i_X = i_X + i_Inc_X;
            }
            l2_vP_set_pixel ( i_Y, i_X );
        }
    }

    l2_vP_set_pixel ( i_Y2, i_X2 );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_box ( int i_X1, int i_Y1, int i_X2, int i_Y2 )
{
    l2_vP_line ( i_X1, i_Y1, i_X1, i_Y2 );
    l2_vP_line ( i_X1, i_Y2, i_X2, i_Y2 );
    l2_vP_line ( i_X2, i_Y2, i_X2, i_Y1 );
    l2_vP_line ( i_X2, i_Y1, i_X1, i_Y1 );
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_circle ( int i_CX, int i_CY, int i_Ray )
{
    int i;
    int i_X, i_Y;

    i_X = i_Ray;
    i_Y = 0;
    i = 3 - ( 2 * i_Ray );

    while ( i_X >= i_Y )
    {
        if ( i_X != i_Y )
        {
            l2_vP_set_pixel ( i_CY + i_Y, i_CX + i_X );
            l2_vP_set_pixel ( i_CY - i_X, i_CX + i_Y );
            l2_vP_set_pixel ( i_CY - i_Y, i_CX - i_X );
            l2_vP_set_pixel ( i_CY + i_X, i_CX - i_Y );
        }

        if ( i_Y != 0 )
        {
            l2_vP_set_pixel ( i_CY - i_Y, i_CX + i_X );
            l2_vP_set_pixel ( i_CY - i_X, i_CX - i_Y );
            l2_vP_set_pixel ( i_CY + i_Y, i_CX - i_X );
            l2_vP_set_pixel ( i_CY + i_X, i_CX + i_Y );
        }

        if ( i < 0 )
        {
            i = i + ( 4 * i_Y ) + 6;
        }
        else
        {
            i = i - ( 4 * i_X ) + ( 4 * i_Y ) + 10;
            i_X --;
        }
        i_Y ++;
    }
}

//---------------------------------------------------------------------------------------------------------------------

static const char Tc_Ram [ ] =
{
//  0     1     2     3     4     5     6     7
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x3C, 0x38, 0x38, 0x24, 0x02, 0x01, 0x00,
    0x00, 0x08, 0x18, 0x3F, 0x18, 0x08, 0x00, 0x00,
    0x00, 0x04, 0x06, 0x3F, 0x06, 0x04, 0x00, 0x00,
    0x04, 0x0E, 0x1F, 0x04, 0x04, 0x04, 0x04, 0x04,
    0x04, 0x04, 0x04, 0x04, 0x1F, 0x0E, 0x04, 0x00,
    0x01, 0x01, 0x09, 0x19, 0x3F, 0x18, 0x08, 0x00,
    0x00, 0x12, 0x0C, 0x3F, 0x0C, 0x12, 0x00, 0x00,
       0,    0,    0,    0,    0,    0,    0,    0,
       0,    0,    0,    0,    0,    0,    0,    0,
       0,    0,    0,    0,    0,    0,    0,    0,
       0,    0,    0,    0,    0,    0,    0,    0,
       0,    0,    0,    0,    0,    0,    0,    0,
       0,    0,    0,    0,    0,    0,    0,    0,
    0x00, 0x00, 0x0E, 0x1F, 0x11, 0x13, 0x13, 0x15,
    0x15, 0x19, 0x19, 0x11, 0x1F, 0x0E, 0x00, 0x00,
    0x00, 0x30, 0x2C, 0x23, 0x20, 0x23, 0x2C, 0x30,
    0x00, 0x30, 0x3C, 0x3F, 0x3F, 0x3F, 0x3C, 0x30,
    0x00, 0x03, 0x0D, 0x31, 0x01, 0x31, 0x0D, 0x03,
    0x00, 0x03, 0x0F, 0x3F, 0x3F, 0x3F, 0x0F, 0x03,
    0x3E, 0x22, 0x22, 0x22, 0x14, 0x14, 0x14, 0x08,
    0x3E, 0x3E, 0x3E, 0x3E, 0x1C, 0x1C, 0x1C, 0x08,
    0x08, 0x14, 0x14, 0x14, 0x22, 0x22, 0x22, 0x3E,
    0x08, 0x1C, 0x1C, 0x1C, 0x3E, 0x3E, 0x3E, 0x3E,
    0x0C, 0x12, 0x12, 0x0C, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x09, 0x09, 0x09, 0x0E, 0x08, 0x10,
    0x08, 0x06, 0x07, 0x1E, 0x3C, 0x1C, 0x0E, 0x04,
    0x07, 0x08, 0x10, 0x00, 0x1C, 0x18, 0x14, 0x03,
    0x30, 0x0A, 0x06, 0x0E, 0x00, 0x02, 0x04, 0x38,
    0x07, 0x08, 0x0B, 0x18, 0x2F, 0x20, 0x30, 0x1F,
    0x3C, 0x08, 0x28, 0x0C, 0x3B, 0x03, 0x06, 0x3C,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x04, 0x0C, 0x0C, 0x04, 0x04, 0x04,
    0x04, 0x04, 0x04, 0x04, 0x0E, 0x0E, 0x00, 0x00,
    0x00, 0x00, 0x0E, 0x1F, 0x01, 0x01, 0x01, 0x0F,
    0x1E, 0x10, 0x10, 0x10, 0x1F, 0x1F, 0x00, 0x00,
    0x0F, 0x01, 0x01, 0x01, 0x1F, 0x0E, 0x00, 0x00,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x11, 0x11, 0x1F,
    0x0F, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
    0x00, 0x00, 0x0E, 0x1F, 0x10, 0x10, 0x10, 0x1E,
    0x1F, 0x11, 0x11, 0x11, 0x1F, 0x0E, 0x00, 0x00,
    0x00, 0x00, 0x0E, 0x1F, 0x11, 0x11, 0x11, 0x1F,
    0x00, 0x00, 0x0E, 0x1F, 0x11, 0x11, 0x11, 0x11,
    0x11, 0x11, 0x11, 0x11, 0x1F, 0x0E, 0x00, 0x00,
    0x1F, 0x11, 0x11, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x1E, 0x1F, 0x11, 0x11, 0x11, 0x1E,
    0x1E, 0x11, 0x11, 0x11, 0x1F, 0x1E, 0x00, 0x00,
    0x00, 0x00, 0x0E, 0x1F, 0x10, 0x10, 0x10, 0x10,
    0x10, 0x10, 0x10, 0x10, 0x1F, 0x1F, 0x00, 0x00,
    0x00, 0x00, 0x1E, 0x1F, 0x11, 0x11, 0x11, 0x11,
    0x11, 0x11, 0x11, 0x11, 0x1F, 0x1E, 0x00, 0x00,
    0x1E, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,
    0x00, 0x00, 0x0E, 0x0E, 0x04, 0x04, 0x04, 0x04,
    0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
    0x01, 0x01, 0x01, 0x11, 0x1F, 0x0E, 0x00, 0x00,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x11, 0x12, 0x1C,
    0x1C, 0x12, 0x11, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x1B, 0x1F, 0x15,
    0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x19, 0x19, 0x15,
    0x15, 0x13, 0x13, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x11, 0x11, 0x11, 0x15, 0x1E, 0x0D, 0x00, 0x00,
    0x1E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x1F, 0x1F, 0x04, 0x04, 0x04, 0x04,
    0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00, 0x00,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11,
    0x11, 0x11, 0x0A, 0x0A, 0x04, 0x04, 0x00, 0x00,
    0x15, 0x15, 0x1B, 0x1B, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x11, 0x11, 0x11, 0x0A, 0x0A, 0x04,
    0x04, 0x0A, 0x0A, 0x11, 0x11, 0x11, 0x00, 0x00,
    0x00, 0x00, 0x1F, 0x1F, 0x01, 0x02, 0x02, 0x04,
    0x04, 0x08, 0x08, 0x10, 0x1F, 0x1F, 0x00, 0x00,
    0x00, 0x00, 0x1F, 0x1F, 0x10, 0x10, 0x10, 0x1E,
    0x10, 0x10, 0x10, 0x10, 0x1F, 0x0E, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00, 0x00,
    0x1C, 0x1C, 0x1C, 0x1D, 0x1F, 0x1F, 0x1F, 0x1E,
    0x0F, 0x1F, 0x3F, 0x3F, 0x37, 0x27, 0x07, 0x07,
    0x00, 0x00, 0x30, 0x30, 0x30, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x0E, 0x1F, 0x1F, 0x0E, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x1F, 0x1F, 0x1F, 0x00,
    0x1C, 0x1E, 0x0F, 0x0F, 0x0F, 0x1E, 0x1C, 0x1C,
    0x00, 0x01, 0x01, 0x03, 0x03, 0x07, 0x07, 0x01,
    0x00, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
    0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
    0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
    0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00,
    0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00,
    0x00, 0x07, 0x0F, 0x0F, 0x1E, 0x1C, 0x1C, 0x1C,
    0x00, 0x3C, 0x3E, 0x3E, 0x0F, 0x07, 0x07, 0x07,
    0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0F, 0x1E,
    0x0F, 0x1E, 0x3C, 0x38, 0x30, 0x20, 0x00, 0x00,
    0x1C, 0x1C, 0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x3F, 0x3F, 0x3F, 0x00,
    0x07, 0x07, 0x3F, 0x3F, 0x3F, 0x07, 0x07, 0x07,
    0x1C, 0x1C, 0x1C, 0x1E, 0x0F, 0x0F, 0x07, 0x00,
    0x07, 0x07, 0x07, 0x0F, 0x3E, 0x3E, 0x3C, 0x00,
    0x00, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C,
    0x00, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,
    0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00,
    0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00,
    0x00, 0x1F, 0x1F, 0x1F, 0x1C, 0x1C, 0x1C, 0x1C,
    0x00, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x3C, 0x3E, 0x3E, 0x0F, 0x07, 0x07,
    0x1C, 0x1C, 0x1F, 0x1F, 0x1F, 0x1C, 0x1C, 0x1C,
    0x00, 0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x3F, 0x3F, 0x3F, 0x07, 0x07, 0x07, 0x07,
    0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x00,
    0x1C, 0x1E, 0x0F, 0x0F, 0x07, 0x00, 0x00, 0x00,
    0x07, 0x0F, 0x3E, 0x3E, 0x3E, 0x0F, 0x07, 0x07,
    0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C,
    0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,
    0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
    0x00, 0x00, 0x3F, 0x3F, 0x3F, 0x07, 0x07, 0x07,
    0x00, 0x1C, 0x1C, 0x1C, 0x1C, 0x1E, 0x1E, 0x1F,
    0x00, 0x07, 0x07, 0x07, 0x07, 0x0F, 0x0F, 0x1F,
    0x1F, 0x1F, 0x1F, 0x1D, 0x1D, 0x1C, 0x1C, 0x1C,
    0x1F, 0x3F, 0x3F, 0x37, 0x37, 0x27, 0x27, 0x07,
    0x07, 0x27, 0x27, 0x37, 0x37, 0x3F, 0x3F, 0x1F,
    0x1F, 0x0F, 0x0F, 0x07, 0x07, 0x07, 0x07, 0x00,
    0x07, 0x0F, 0x3E, 0x3E, 0x3C, 0x00, 0x00, 0x00,
    0x07, 0x07, 0x37, 0x3E, 0x3E, 0x3F, 0x37, 0x00,
    0x00, 0x1F, 0x1F, 0x1F, 0x01, 0x01, 0x01, 0x01,
    0x00, 0x3F, 0x3F, 0x3F, 0x30, 0x30, 0x30, 0x30,
    0x1C, 0x1C, 0x1E, 0x0F, 0x07, 0x03, 0x01, 0x00,
    0x07, 0x07, 0x0F, 0x1E, 0x3C, 0x38, 0x30, 0x00,
    0x1C, 0x1C, 0x1C, 0x1D, 0x1D, 0x1F, 0x1F, 0x1F,
    0x1F, 0x1E, 0x1E, 0x1C, 0x1C, 0x1C, 0x1C, 0x00
};

static void vP_load_ram ( void )
{
    int i, i_Nmb;

    i_Nmb = 8 * 128;

    for ( i = 0; i < i_Nmb; i ++ )
    {
        l2_vP_set_data( Tc_Ram [ i ] );
        l2_vP_set_ctrl( 0xC0 ); 
    }
}

//---------------------------------------------------------------------------------------------------------------------

void l2_vP_init_lcd ( void )
{
    if ( cP_test_lcd ( ) == 0 )
    {
        IO_vP_RetLCD ( 0 );

    	return;
    };

    IO_vP_RetLCD ( 0 );

    l2_vP_set_ctrl ( 0x80 );                               // OR mode.

    l2_vP_set_data ( 0 );                                  // RAM graphique en 0000h.
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x42 );

    l2_vP_set_data ( 0);                                   // RAM texte en 1700h.
    l2_vP_set_data ( 0x17 );
    l2_vP_set_ctrl ( 0x40 );

    l2_vP_set_data ( 0 );                                  // Curseur texte en 1700h.
    l2_vP_set_data ( 0x17 );
    l2_vP_set_ctrl ( ( char ) 0x24 );

    l2_vP_set_data ( 0x28 );                               // Matrice graphique 6 x 8.
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x43 );

    l2_vP_set_data ( 0x28 );                               // Matrice texte 6 x 8.
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x41 );

    l2_vP_set_data ( 0 );                                  // curseur home, hauteur 2 lignes
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x21 );
    l2_vP_set_ctrl ( ( char ) 0xa1 );

    l2_vP_set_data ( 3 );                                  // Plage CG RAM 18xx..1fffh.
    l2_vP_set_data ( 0 );
    l2_vP_set_ctrl ( 0x22 );

    l2_vP_set_data ( 0 );                                  // Table CG_RAM en 1c00h puis charge en assembleur.
    l2_vP_set_data ( 0x1c );
    l2_vP_set_ctrl ( 0x24 );

    vP_load_ram ( );

    l1_c_set_scr = ( char ) 0x9c;                          // Valide text + graphique IMPERATIF pour utiliser les ATTRIBUTS.
    l2_vP_set_ctrl ( l1_c_set_scr );
}

//---------------------------------------------------------------------------------------------------------------------

static void vP_line_bin ( int x , int y  , int nb , const char * tab)
{
	int i, j; 
	int pos = 0;
 
 

	for( pos = 0 ; pos < nb ; pos++)
	{

		i = tab[pos] >> 4;
		j = 8;
		while ( j )
		{
			if ( i & j ) { l1_c_color = WHITE; l2_vP_set_pixel ( y,x );}
			else         { l1_c_color = BLACK; }

			
			x ++;
			j >>= 1;
		}

		i = tab[pos] & 0x0f;
		j = 8;
		while ( j )
		{
			if ( i & j ) { l1_c_color = WHITE; l2_vP_set_pixel ( y,x ); }
			else         { l1_c_color = BLACK; }

			
			x ++;
			j >>= 1;
		}
	}
 
}


/* Comil gcc -m32 bmp2bin.c -o bmp2bin
 *
 * */

const int lin = 128;
const int col = 240;
const int bitdip  = 1;


/*static int LoadBmp( char * filename )
{
	FILE *inf;

	int x, y, z;
	int i;

	struct {
		char ident[2];
		long size;
		short res1, res2;
		long offset;
		long sizeheader;
		long width, height;
		short planes;
		short bpp;
		long compression;
		long imgsize;
		long widthpels;
		long heightpels;
		long numcolors;
		long importantcolors;
	} bmpinfo;
  
	
	if ((inf = fopen(filename, "rb")) == NULL)
	{
		fprintf(stderr, "bmp2bin: Can't open input file \"%s\".\n", filename);
		return -1;
	}

	if (fread(&bmpinfo.ident, sizeof(bmpinfo.ident), 1, inf) != 1)
	{
		fprintf(stderr, "bmp2bin: Can't read bitmap identifier. (Wow that's weird.)\n");
		fclose(inf);
		return -1;
	}

	if (fread(&bmpinfo.size, sizeof(bmpinfo) - 2, 1, inf) != 1)
	{
		fprintf(stderr, "bmp2bin: Can't read bitmap info. (Wow that\'s weird.)\n");
		fclose(inf);
		return -1;
	}

	if (memcmp(&(bmpinfo.ident), "BM", 2))
	{
		fprintf(stderr, "bmp2bin: File is not a bitmap.\n");
		fclose(inf);
		return -1;
	}

	if (bmpinfo.bpp != bitdip)
	{
		fprintf(stderr, "bmp2bin: Not a %d-bit bitmap.\n", bitdip);
		fclose(inf);
		return -1;
	}

	if ((bmpinfo.width != col) || (bmpinfo.height != lin))
	{
		fprintf(stderr, "bmp2bin: Picture width is not %d x %d. %ld x %ld\n",col ,lin, bmpinfo.width, bmpinfo.height);
		fclose(inf);
		return -1;
	}

	if (bmpinfo.compression != 0)
	{
		fprintf(stderr, "bmp2bin: Bitmap is compressed. (That's bad.)\n");
		fclose(inf);
		return -1;
	}

	fseek(inf,bmpinfo.offset, SEEK_SET);	

	const int RowSize = ceil(bitdip * bmpinfo.width /32.0) *4;
	const int PixelArraySize = RowSize * bmpinfo.height;

	uint8_t * Buffer = malloc( PixelArraySize ); 

	fprintf(stdout, "bmp2bin: RowSize= %d , PixelArraySize=%d\n",RowSize,PixelArraySize);

	z = fread( Buffer , sizeof(uint8_t) , PixelArraySize , inf );
	fprintf(stdout, "bmp2bin: read %d\n", z);

	for (x = 0; x < bmpinfo.height; x++)
	{
		y = RowSize * (bmpinfo.height-1 -x); 
		
		for( z = 0 ; z < col / 8 ; z++ )
		{
			Buffer[y+z] = ~Buffer[y+z];
		}
		
		vP_line_bin( 0 , 127-x , 30 , &Buffer[y] );
	} 
	free( Buffer );
	fclose(inf);
}*/

const char Tc_Version[] = "Dev : " __DATE__ " " __TIME__;


char BMP[ 3840] = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0xFF, 0xFF, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0xE0, 0x7F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFF, 0x00, 0x0F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFE, 0x00, 0x03, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xC7, 0xF8, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xFF, 0xF7, 0xF8, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xFF, 0xFF, 0xC0, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xFF, 0xFF, 0xC0, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF8, 0x07, 0xC0, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xE0, 0x01, 0xE0, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xC0, 0x00, 0xE0, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0x80, 0x00, 0x60, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFC, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF8, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF8, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF0, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00
};
   
   
int do_esascreen(cmd_tbl_t *cmdtp, int flag, int argc, char * const argv[])
{
	int ret = 0;

	int i;
	int pos;
	int logo;
	const char *txt;
	if( argc < 2 )
	{
		return -1;
	}
	logo = simple_strtoul(argv[1], NULL, 10);
	
	txt = Tc_Version;
	if( argc > 2 )
	{
		txt = argv[2];
	}
	
	IO_vP_Ini_IO();
	
	IO_vP_RetLCD( 0 );

	l2_vP_init_lcd();

	if( l2_c_detect_lcd  == 0) return 0;

	IO_vP_RetLCD( 1 );

	IO_vP_Bip( );

	l2_vP_clr_st();
	l2_vP_clr_sg();

	l1_c_set_scr |= 8;

	l2_vP_set_data ( 0 );
	l2_vP_set_data ( 0 );
	l2_vP_set_ctrl ( 0x42 );
	l2_vP_set_data ( 0 );
	l2_vP_set_data ( 0 );
	l2_vP_set_ctrl ( 0x24 );

	l2_vP_set_ctrl( 0x81 ); //T_EXOR_G

	l1_c_color = WHITE;
	if(logo)
	{
		for (i = 0; i < lin; i++)
		{
			vP_line_bin( 0 , 127-i , 30 , &BMP[i*30] );
		} 
	}

	l2_vP_locate ( 0, 0 );


	pos = 0;
	while ( txt[pos++] != 0 )
	{
		l2_vP_putcharc ( txt[pos-1] );
	}

	return ret;
}

int do_esaswitch(cmd_tbl_t *cmdtp, int flag, int argc, char * const argv[])
{
	int no=0, val;
	if( argc < 2 )
	{
		return -1;
	}
	no = simple_strtoul(argv[1], NULL, 10);
	
	IO_vP_Ini_IO();
	val = get_SW(no)?0:1;
	printf("%d\n", val);
	return val;
}

#ifdef CONFIG_SYS_LONGHELP
static char esascreen_help_text[] =
	"disp [txt]\n"
	"\t- display logo on lcd screen\n"
	"\tdisp : Display the logo\n"
	"\ttxt : Text to display on the logo\n"
	"";
static char esaswitch_help_text[] =
	"no\n"
	"\t- get the status of switch\n"
	"\tno : switch's number\n"
	"";
#endif

U_BOOT_CMD(
	esascreen,	CONFIG_SYS_MAXARGS,	1,	do_esascreen,
	"Display logo on lcd screen", esascreen_help_text
);

U_BOOT_CMD(
	esaswitch,	CONFIG_SYS_MAXARGS,	1,	do_esaswitch,
	"Get switch status", esaswitch_help_text
);

